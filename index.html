<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Key System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        :root {
            --primary-color: #1a1a2e;
            --secondary-color: #16213e;
            --accent-color: #4cc9f0;
            --text-color: #fff;
            --danger-color: #e94560;
            --success-color: #4caf50;
            --warning-color: #ff9800;
            --card-bg: #16213e;
            --input-bg: #0f3460;
            --border-color: #4cc9f0;
        }
        
        body {
            background-color: var(--primary-color);
            color: var(--text-color);
            line-height: 1.6;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background-color: var(--secondary-color);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, var(--accent-color) 0%, transparent 70%);
            opacity: 0.1;
            z-index: 0;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 0;
            color: var(--accent-color);
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            position: relative;
            z-index: 1;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .header-controls {
            display: flex;
            gap: 10px;
            position: relative;
            z-index: 1;
        }
        
        .btn {
            background-color: var(--accent-color);
            color: var(--secondary-color);
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .btn-danger {
            background-color: var(--danger-color);
            color: white;
        }
        
        .btn-success {
            background-color: var(--success-color);
            color: white;
        }
        
        .btn-warning {
            background-color: var(--warning-color);
            color: white;
        }
        
        .login-form {
            background-color: var(--card-bg);
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            max-width: 500px;
            margin: 0 auto;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: var(--accent-color);
        }
        
        input[type="text"],
        input[type="password"],
        input[type="number"],
        input[type="email"],
        select,
        textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--border-color);
            border-radius: 5px;
            background-color: var(--input-bg);
            color: var(--text-color);
            font-size: 16px;
            transition: all 0.3s;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            box-shadow: 0 0 0 2px rgba(76, 201, 240, 0.3);
        }
        
        .dashboard {
            display: none;
        }
        
        .tabs {
            display: flex;
            margin-bottom: 20px;
            background-color: var(--secondary-color);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .tab {
            padding: 15px 20px;
            cursor: pointer;
            flex: 1;
            text-align: center;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .tab::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 0;
            height: 3px;
            background-color: var(--accent-color);
            transition: all 0.3s;
            transform: translateX(-50%);
        }
        
        .tab:hover::after {
            width: 80%;
        }
        
        .tab.active {
            background-color: var(--accent-color);
            color: var(--secondary-color);
            font-weight: bold;
        }
        
        .tab.active::after {
            width: 100%;
            height: 3px;
            background-color: var(--secondary-color);
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .tab-content.active {
            display: block;
        }
        
        .card {
            background-color: var(--card-bg);
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--accent-color), var(--secondary-color));
        }
        
        .card h2 {
            margin-bottom: 20px;
            color: var(--accent-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid var(--input-bg);
        }
        
        th {
            background-color: var(--input-bg);
            color: var(--accent-color);
            font-weight: bold;
            position: sticky;
            top: 0;
        }
        
        tr:hover {
            background-color: rgba(15, 52, 96, 0.3);
        }
        
        .action-btn {
            padding: 8px 12px;
            margin-right: 5px;
            border-radius: 4px;
            font-size: 12px;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        .status-badge {
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
            display: inline-block;
        }
        
        .status-active {
            background-color: var(--success-color);
            color: white;
        }
        
        .status-expired {
            background-color: var(--danger-color);
            color: white;
        }
        
        .status-banned {
            background-color: var(--warning-color);
            color: white;
        }
        
        .form-inline {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .form-inline input {
            flex: 1;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 5px;
            background-color: var(--success-color);
            color: white;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            display: none;
            z-index: 1000;
            animation: slideIn 0.3s;
            max-width: 350px;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .notification.error {
            background-color: var(--danger-color);
        }
        
        .notification.warning {
            background-color: var(--warning-color);
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            padding: 15px;
            background-color: var(--input-bg);
            border-radius: 8px;
        }
        
        .user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: var(--accent-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: bold;
        }
        
        .user-details {
            flex: 1;
        }
        
        .user-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .stat-card {
            background-color: var(--input-bg);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: var(--accent-color);
            margin: 10px 0;
        }
        
        .stat-label {
            font-size: 14px;
            color: #aaa;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s;
        }
        
        .modal-content {
            background-color: var(--card-bg);
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            position: relative;
        }
        
        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 24px;
            cursor: pointer;
            color: #aaa;
            transition: color 0.3s;
        }
        
        .close-modal:hover {
            color: var(--danger-color);
        }
        
        .chat-container {
            background-color: var(--card-bg);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            height: 400px;
            display: flex;
            flex-direction: column;
        }
        
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            margin-bottom: 15px;
            padding: 15px;
            background-color: var(--input-bg);
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .chat-message {
            padding: 10px 15px;
            border-radius: 8px;
            max-width: 80%;
            position: relative;
        }
        
        .message-self {
            background-color: var(--accent-color);
            color: var(--secondary-color);
            align-self: flex-end;
        }
        
        .message-other {
            background-color: var(--input-bg);
            align-self: flex-start;
        }
        
        .message-sender {
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 14px;
        }
        
        .message-time {
            font-size: 12px;
            opacity: 0.7;
            margin-top: 5px;
        }
        
        .chat-input {
            display: flex;
            gap: 10px;
        }
        
        .chat-input input {
            flex: 1;
        }
        
        .activity-list {
            max-height: 500px;
            overflow-y: auto;
        }
        
        .activity-item {
            padding: 15px;
            margin-bottom: 10px;
            background-color: var(--input-bg);
            border-radius: 8px;
            border-left: 4px solid var(--accent-color);
        }
        
        .activity-admin {
            font-weight: bold;
            color: var(--accent-color);
            margin-bottom: 5px;
        }
        
        .activity-action {
            margin-bottom: 5px;
        }
        
        .activity-time {
            font-size: 12px;
            color: #aaa;
        }
        
        .key-history {
            max-height: 400px;
            overflow-y: auto;
        }
        
        .history-item {
            padding: 12px;
            margin-bottom: 10px;
            background-color: var(--input-bg);
            border-radius: 8px;
            border-left: 4px solid var(--success-color);
        }
        
        .history-key {
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--accent-color);
        }
        
        .history-action {
            margin-bottom: 5px;
        }
        
        .role-badge {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            margin-left: 8px;
        }
        
        .role-owner {
            background-color: var(--warning-color);
            color: black;
        }
        
        .role-superadmin {
            background-color: var(--accent-color);
            color: var(--secondary-color);
        }
        
        .role-admin {
            background-color: var(--success-color);
            color: white;
        }
        
        @media (max-width: 768px) {
            .tabs {
                flex-direction: column;
            }
            
            .form-inline {
                flex-direction: column;
            }
            
            .user-stats {
                grid-template-columns: 1fr;
            }
            
            table {
                display: block;
                overflow-x: auto;
            }
        }
        
        .loader {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: var(--accent-color);
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .search-box {
            position: relative;
            margin-bottom: 20px;
        }
        
        .search-box i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #aaa;
        }
        
        .search-box input {
            padding-left: 40px;
        }
        
        .pagination {
            display: flex;
            justify-content: center;
            margin-top: 20px;
            gap: 5px;
        }
        
        .page-btn {
            padding: 8px 12px;
            background-color: var(--input-bg);
            border: none;
            border-radius: 4px;
            color: var(--text-color);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .page-btn.active {
            background-color: var(--accent-color);
            color: var(--secondary-color);
        }
        
        .page-btn:hover:not(.active) {
            background-color: rgba(76, 201, 240, 0.2);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-key"></i> ADMIN PANEL - KEY SYSTEM</h1>
            <div class="header-controls" id="headerControls" style="display: none;">
                <span id="userRoleBadge" class="role-badge"></span>
                <button class="btn" id="refreshBtn">
                    <i class="fas fa-sync-alt"></i> Refresh
                </button>
                <button class="btn" id="backupBtn">
                    <i class="fas fa-download"></i> Backup
                </button>
                <button class="btn btn-danger" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </header>
        
        <div class="login-form" id="loginForm">
            <h2><i class="fas fa-lock"></i> Đăng nhập Admin</h2>
            <div class="form-group">
                <label for="username"><i class="fas fa-user"></i> Username:</label>
                <input type="text" id="username" placeholder="Nhập username">
            </div>
            <div class="form-group">
                <label for="password"><i class="fas fa-key"></i> Password:</label>
                <input type="password" id="password" placeholder="Nhập password">
            </div>
            <button class="btn" id="loginBtn"><i class="fas fa-sign-in-alt"></i> Đăng nhập</button>
        </div>
        
        <div class="dashboard" id="dashboard">
            <div class="tabs">
                <div class="tab active" data-tab="keys"><i class="fas fa-key"></i> Quản lý Keys</div>
                <div class="tab" data-tab="users"><i class="fas fa-users"></i> Quản lý Users</div>
                <div class="tab" data-tab="create"><i class="fas fa-plus-circle"></i> Tạo Key</div>
                <div class="tab" data-tab="admins" id="adminsTabBtn" style="display: none;"><i class="fas fa-user-shield"></i> Quản lý Admins</div>
                <div class="tab" data-tab="activity" id="activityTabBtn" style="display: none;"><i class="fas fa-history"></i> Lịch sử hoạt động</div>
                <div class="tab" data-tab="chat" id="chatTabBtn"><i class="fas fa-comments"></i> Chat Admin</div>
            </div>
            
            <div class="tab-content active" id="keysTab">
                <div class="card">
                    <h2><i class="fas fa-key"></i> Danh sách Keys</h2>
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="searchKey" placeholder="Tìm kiếm key, user ID, username...">
                    </div>
                    <div class="table-responsive">
                        <table id="keysTable">
                            <thead>
                                <tr>
                                    <th>Key</th>
                                    <th>User ID</th>
                                    <th>Username</th>
                                    <th>HWID</th>
                                    <th>Ngày tạo</th>
                                    <th>Hết hạn</th>
                                    <th>Trạng thái</th>
                                    <th>Hành động</th>
                                </tr>
                            </thead>
                            <tbody id="keysList">
                                <!-- Keys will be populated here -->
                            </tbody>
                        </table>
                    </div>
                    <div class="pagination" id="keysPagination">
                        <!-- Pagination will be populated here -->
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="usersTab">
                <div class="card">
                    <h2><i class="fas fa-users"></i> Danh sách Users</h2>
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="searchUser" placeholder="Tìm kiếm user ID, username...">
                    </div>
                    <div class="table-responsive">
                        <table id="usersTable">
                            <thead>
                                <tr>
                                    <th>User ID</th>
                                    <th>Username</th>
                                    <th>Số key</th>
                                    <th>Lần cuối</th>
                                    <th>Trạng thái</th>
                                    <th>Hành động</th>
                                </tr>
                            </thead>
                            <tbody id="usersList">
                                <!-- Users will be populated here -->
                            </tbody>
                        </table>
                    </div>
                    <div class="pagination" id="usersPagination">
                        <!-- Pagination will be populated here -->
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="createTab">
                <div class="card">
                    <h2><i class="fas fa-plus-circle"></i> Tạo Key Mới</h2>
                    <div class="form-group">
                        <label for="keyPrefix">Prefix cho key:</label>
                        <input type="text" id="keyPrefix" value="key-" placeholder="Nhập prefix cho key">
                    </div>
                    <div class="form-group">
                        <label for="keyHours">Thời gian hiệu lực (giờ):</label>
                        <input type="number" id="keyHours" value="24" min="1">
                    </div>
                    <div class="form-group">
                        <label for="keyPermanent">
                            <input type="checkbox" id="keyPermanent"> Key vĩnh viễn
                        </label>
                    </div>
                    <button class="btn" id="createKeyBtn"><i class="fas fa-key"></i> Tạo Key</button>
                    <div id="createdKeyInfo" style="margin-top: 20px; display: none;">
                        <h3><i class="fas fa-check-circle"></i> Key đã được tạo:</h3>
                        <p id="newKeyValue" style="word-break: break-all; padding: 10px; background-color: var(--input-bg); border-radius: 5px;"></p>
                        <p id="newKeyExpiry"></p>
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="adminsTab">
                <div class="card">
                    <h2><i class="fas fa-user-shield"></i> Danh sách Admins</h2>
                    <div class="form-group">
                        <label for="newAdminUsername"><i class="fas fa-user"></i> Username mới:</label>
                        <input type="text" id="newAdminUsername" placeholder="Nhập username mới">
                    </div>
                    <div class="form-group">
                        <label for="newAdminPassword"><i class="fas fa-key"></i> Password mới:</label>
                        <input type="password" id="newAdminPassword" placeholder="Nhập password mới">
                    </div>
                    <button class="btn" id="createAdminBtn"><i class="fas fa-plus"></i> Tạo Admin</button>
                    <div class="table-responsive">
                        <table id="adminsTable">
                            <thead>
                                <tr>
                                    <th>Username</th>
                                    <th>Super Admin</th>
                                    <th>Ngày tạo</th>
                                    <th>Hành động</th>
                                </tr>
                            </thead>
                            <tbody id="adminsList">
                                <!-- Admins will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="activityTab">
                <div class="card">
                    <h2><i class="fas fa-history"></i> Lịch sử hoạt động Admin</h2>
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="searchActivity" placeholder="Tìm kiếm admin, hành động...">
                    </div>
                    <div class="activity-list" id="activityList">
                        <!-- Activity logs will be populated here -->
                    </div>
                    <div class="pagination" id="activityPagination">
                        <!-- Pagination will be populated here -->
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="chatTab">
                <div class="card">
                    <h2><i class="fas fa-comments"></i> Chat Admin</h2>
                    <div class="chat-container">
                        <div class="chat-messages" id="chatMessages">
                            <!-- Chat messages will be populated here -->
                        </div>
                        <div class="chat-input">
                            <input type="text" id="chatInput" placeholder="Nhập tin nhắn...">
                            <button class="btn" id="sendChatBtn"><i class="fas fa-paper-plane"></i> Gửi</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- User Detail Modal -->
    <div class="modal" id="userDetailModal">
        <div class="modal-content">
            <span class="close-modal" id="closeUserModal">&times;</span>
            <h2><i class="fas fa-user"></i> Thông tin User</h2>
            <div id="userDetailContent">
                <!-- User details will be populated here -->
            </div>
            <button class="btn" id="viewKeyHistoryBtn"><i class="fas fa-history"></i> Xem lịch sử key</button>
        </div>
    </div>
    
    <!-- Key History Modal -->
    <div class="modal" id="keyHistoryModal">
        <div class="modal-content">
            <span class="close-modal" id="closeKeyHistoryModal">&times;</span>
            <h2><i class="fas fa-history"></i> Lịch sử Key</h2>
            <div class="key-history" id="keyHistoryContent">
                <!-- Key history will be populated here -->
            </div>
        </div>
    </div>
    
    <!-- Key Edit Modal -->
    <div class="modal" id="keyEditModal">
        <div class="modal-content">
            <span class="close-modal" id="closeKeyEditModal">&times;</span>
            <h2><i class="fas fa-edit"></i> Chỉnh sửa Key</h2>
            <div class="form-group">
                <label for="editKeyHours">Thời gian mới (giờ):</label>
                <input type="number" id="editKeyHours" min="1">
            </div>
            <div class="form-group">
                <label for="editKeyPermanent">
                    <input type="checkbox" id="editKeyPermanent"> Đặt vĩnh viễn
                </label>
            </div>
            <button class="btn" id="saveKeyEditBtn"><i class="fas fa-save"></i> Lưu thay đổi</button>
        </div>
    </div>
    
    <div class="notification" id="notification"></div>
    
    <script>
        const _0x439b25=_0x58d9;(function(_0x3dc4de,_0x37a114){const _0x4f49fd=_0x58d9,_0xaa56fe=_0x3dc4de();while(!![]){try{const _0x242b5a=-parseInt(_0x4f49fd(0x22e))/0x1+parseInt(_0x4f49fd(0x188))/0x2+parseInt(_0x4f49fd(0x1ad))/0x3+-parseInt(_0x4f49fd(0x19f))/0x4+parseInt(_0x4f49fd(0x266))/0x5*(-parseInt(_0x4f49fd(0x1ef))/0x6)+parseInt(_0x4f49fd(0x190))/0x7*(-parseInt(_0x4f49fd(0x1f1))/0x8)+-parseInt(_0x4f49fd(0x193))/0x9*(-parseInt(_0x4f49fd(0x1a9))/0xa);if(_0x242b5a===_0x37a114)break;else _0xaa56fe['push'](_0xaa56fe['shift']());}catch(_0x2ec421){_0xaa56fe['push'](_0xaa56fe['shift']());}}}(_0x5910,0x1b127));const API_BASE='https://serverluexreal.onrender.com';let authToken=localStorage[_0x439b25(0x1a1)](_0x439b25(0x1d3))||'',currentUsername=localStorage['getItem'](_0x439b25(0x182))||'',isSuperAdmin=localStorage[_0x439b25(0x1a1)](_0x439b25(0x23c))==='true',isOwner=localStorage[_0x439b25(0x1a1)](_0x439b25(0x185))===_0x439b25(0x1e7),currentPage={'keys':0x1,'users':0x1,'activity':0x1};const itemsPerPage=0x14;function _0x5910(){const _0x14d9d9=['\x27)\x22><i\x20class=\x22fas\x20fa-unlock\x22></i>\x20Unban</button>','\x27)\x22><i\x20class=\x22fas\x20fa-trash\x22></i>\x20Delete</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','sendChatBtn','95915zBjrHe','emit','getElementById','\x27,\x20','userDetailContent','Xác\x20nhận\x20unban\x20user?','Xóa\x20admin\x20thành\x20công','remove','Lỗi\x20cập\x20nhật\x20key','keyHours','<i\x20class=\x22fas\x20fa-paper-plane\x22></i>\x20Gửi','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','stringify','on\x20','message-self','block','details','filter','resolve','editKeyPermanent','activityList','toUpperCase','keyPrefix','.tab','addEventListener','message','Ban\x20user\x20thành\x20công','<span\x20class=\x22status-badge\x20status-banned\x22>Banned</span>','searchActivity','user_id','appendChild','Tab','Active','vi-VN','Lỗi\x20unban\x20user','Lỗi\x20tạo\x20admin','adminUsername','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','activity-item','isOwner','newKeyExpiry','adminsTabBtn','168938fIdmjX','Lỗi\x20tải\x20activity','admins','log','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20btn-warning\x22\x20onclick=\x22editKeyExpiry(\x27','chatMessages','/admin/refresh-token','thăng','7ENIsGs','Xác\x20nhận\x20ban\x20user?','expires','135mwVghy','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20btn-success\x22\x20onclick=\x22viewUserDetail(\x27','then','Đã\x20đăng\x20xuất','viewKeyHistoryBtn','/admin/users','history-item','Hết\x20hạn:\x20','closeUserModal','Đang\x20gửi...','first_seen','\x27)\x22><i\x20class=\x22fas\x20fa-trash\x22></i>\x20Delete</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','836764AVPgRJ','keyHistoryModal','getItem','Owner','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22history-action\x22>','add','keypress','Đăng\x20nhập\x20thành\x20công','scrollTop','Banned','237190YZInTz','Lỗi\x20làm\x20mới\x20token','flex','createdKeyInfo','535260oBFOWj','scrollHeight','<button\x20class=\x22action-btn\x20btn-danger\x22\x20onclick=\x22banUser(\x27','POST','key','chat-message\x20','none','/admin/create-key','Connected\x20to\x20Socket.IO\x20server','/admin/backup','Enter','classList','dashboard','history','forEach','keyPermanent','display','Lỗi\x20refresh','catch','/admin/unban-user','is_super_admin','role-superadmin','<i\x20class=\x22fas\x20fa-sign-in-alt\x22></i>\x20Đăng\x20nhập','chat','password','textContent','closeKeyEditModal','\x27)\x22><i\x20class=\x22fas\x20fa-eye\x22></i>\x20View</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','replace','admin_username','input','<i\x20class=\x22fas\x20fa-key\x22></i>\x20Tạo\x20Key','last_seen','Backup\x20thành\x20công:\x20','success','username','tab','<span\x20class=\x22status-badge\x20status-expired\x22>No</span>','adminToken','banned','Vĩnh\x20viễn','error','slice','createKeyBtn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22history-key\x22>','\x20cấp\x20super\x20admin\x20cho\x20','Lỗi\x20xác\x20thực:','editKeyHours','role-owner','Lỗi\x20tải\x20keys','Lỗi\x20kết\x20nối:','className','role-admin','json','Lỗi\x20xóa\x20admin','Xóa\x20key\x20thành\x20công','keyHistoryContent','userRoleBadge','true','application/json','/admin/create-admin','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22stat-label\x22>Lần\x20cuối</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22stat-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22stat-value\x22>','innerHTML','Cập\x20nhật\x20key\x20thành\x20công','newKeyValue','/admin/delete-admin/','30rbwyBD','createElement','451816lXAlxZ','Lỗi\x20tải\x20thông\x20tin\x20user','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-time\x22>','trim','Xác\x20nhận\x20xóa\x20admin\x20','permanent','message-other','keyEditModal','Không\x20thể\x20gửi\x20tin\x20nhắn:\x20chưa\x20kết\x20nối\x20hoặc\x20tin\x20nhắn\x20trống','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>','querySelectorAll','Lỗi\x20kết\x20nối\x20server,\x20vui\x20lòng\x20thử\x20lại','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22stat-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22stat-value\x22>','headerControls','Lỗi\x20ban\x20user','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20btn-warning\x22\x20onclick=\x22toggleSuperAdmin(\x27','</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>ID:\x20','Admin','searchKey','saveKeyEditBtn','createAdminBtn','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22stat-label\x22>Tổng\x20keys</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22stat-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22stat-value\x22>','<span\x20class=\x22status-badge\x20status-warning\x22>Unused</span>','target','all','includes','keysList','usersList','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Tạo\x20admin\x20thành\x20công','activityTabBtn','<span\x20class=\x22status-badge\x20status-expired\x22>Expired</span>','value','<span\x20class=\x22status-badge\x20status-active\x22>Used</span>','target_value','style','/admin/admins','<span\x20class=\x22status-badge\x20status-active\x22>Active</span>','<span\x20class=\x22loader\x22></span>\x20','Lỗi\x20backup','activityPagination','connected','Lỗi\x20tải\x20lịch\x20sử\x20key','created_at','DELETE','connect','chatInput','loginBtn','Lỗi\x20tạo\x20key','searchUser','dataset','Xác\x20nhận\x20','setItem','Bearer\x20','button','expires_at','Chỉ\x20owner\x20mới\x20có\x20quyền\x20này','toLocaleString','<i\x20class=\x22fas\x20fa-plus\x22></i>\x20Tạo\x20Admin','/admin/activity?limit=500','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>','146204TALubY','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-avatar\x22>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-sender\x22>','toLowerCase','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>','/admin/login','toggle','token','disabled','disconnect','length','userDetailModal','active','[data-tab=\x22','isSuperAdmin','refreshBtn','backupBtn','users','Pagination','newAdminPassword','checked','click','Lỗi\x20tải\x20users','loginForm','Unban\x20user\x20thành\x20công','/admin/update-key-expiry','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Lỗi\x20cập\x20nhật\x20vai\x20trò','action','Đang\x20đăng\x20nhập...','logoutBtn','Lỗi\x20tải\x20admins','activity','div','is_owner','total_keys_used','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22stat-label\x22>Lần\x20đầu</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22stat-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22stat-value\x22>','Disconnected\x20from\x20Socket.IO\x20server','page-btn','target_type','backup_path','keys','Xác\x20nhận\x20xóa\x20key?',')\x22><i\x20class=\x22fas\x20fa-user-edit\x22></i>\x20Toggle\x20Super</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20btn-danger\x22\x20onclick=\x22deleteAdmin(\x27','Tạo\x20key\x20thành\x20công','/admin/user-key-history/','Thiếu\x20thông\x20tin','hwid','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Token\x20refreshed\x20successfully','Lỗi\x20xóa\x20key','newAdminUsername','Đang\x20tạo...'];_0x5910=function(){return _0x14d9d9;};return _0x5910();}let currentEditKey='',currentUserId='',socket;function initSocket(){const _0x294608=_0x439b25;if(!authToken)return;socket=io(API_BASE,{'auth':{'token':authToken}}),socket['on'](_0x294608(0x21e),()=>{const _0x44c3aa=_0x294608;console[_0x44c3aa(0x18b)](_0x44c3aa(0x1b5));}),socket['on'](_0x294608(0x1ba),_0x3929ac=>{const _0xc31cef=_0x294608,_0x5535f2=document[_0xc31cef(0x268)](_0xc31cef(0x18d));_0x5535f2[_0xc31cef(0x1eb)]='',_0x3929ac[_0xc31cef(0x1bb)](_0x53315e=>{const _0x2ccc36=_0xc31cef,_0x2ad754=document['createElement'](_0x2ccc36(0x24f));_0x2ad754[_0x2ccc36(0x1e0)]=_0x2ccc36(0x1b2)+(_0x53315e[_0x2ccc36(0x1ca)]===currentUsername?_0x2ccc36(0x16c):_0x2ccc36(0x1f7)),_0x2ad754['innerHTML']=_0x2ccc36(0x230)+_0x53315e[_0x2ccc36(0x1ca)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>'+_0x53315e[_0x2ccc36(0x177)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-time\x22>'+formatDate(_0x53315e[_0x2ccc36(0x21c)])+_0x2ccc36(0x183),_0x5535f2[_0x2ccc36(0x17c)](_0x2ad754);}),_0x5535f2[_0xc31cef(0x1a7)]=_0x5535f2[_0xc31cef(0x1ae)];}),socket['on'](_0x294608(0x177),_0xeee41f=>{const _0x4c073a=_0x294608,_0x18833f=document[_0x4c073a(0x268)](_0x4c073a(0x18d)),_0xa1375a=document[_0x4c073a(0x1f0)](_0x4c073a(0x24f));_0xa1375a[_0x4c073a(0x1e0)]=_0x4c073a(0x1b2)+(_0xeee41f[_0x4c073a(0x1ca)]===currentUsername?_0x4c073a(0x16c):_0x4c073a(0x1f7)),_0xa1375a[_0x4c073a(0x1eb)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-sender\x22>'+_0xeee41f[_0x4c073a(0x1ca)]+_0x4c073a(0x22d)+_0xeee41f[_0x4c073a(0x177)]+_0x4c073a(0x1f3)+formatDate(_0xeee41f[_0x4c073a(0x21c)])+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x18833f[_0x4c073a(0x17c)](_0xa1375a),_0x18833f['scrollTop']=_0x18833f[_0x4c073a(0x1ae)];}),socket['on'](_0x294608(0x1d6),_0x2544ef=>{const _0x1ecab0=_0x294608;showNotification(_0x2544ef[_0x1ecab0(0x177)]||'Lỗi\x20kết\x20nối\x20chat',!![]);}),socket['on'](_0x294608(0x237),()=>{const _0x228ff5=_0x294608;console['log'](_0x228ff5(0x253));});}function verifyToken(){const _0x29bbe1=_0x439b25;fetch(API_BASE+'/admin/verify-token',{'headers':{'Authorization':_0x29bbe1(0x226)+authToken}})[_0x29bbe1(0x195)](_0x53992e=>{const _0x2f7492=_0x29bbe1;return _0x53992e['ok']?_0x53992e['json']()[_0x2f7492(0x195)](_0x1f17f9=>{const _0x12bb23=_0x2f7492;currentUsername=_0x1f17f9[_0x12bb23(0x1d0)],isSuperAdmin=_0x1f17f9[_0x12bb23(0x1c1)],isOwner=_0x1f17f9[_0x12bb23(0x250)],localStorage[_0x12bb23(0x225)](_0x12bb23(0x182),currentUsername),localStorage['setItem'](_0x12bb23(0x23c),isSuperAdmin),localStorage[_0x12bb23(0x225)](_0x12bb23(0x185),isOwner),showDashboard(),initSocket();}):_0x53992e[_0x2f7492(0x1e2)]()[_0x2f7492(0x195)](_0x335d4e=>{const _0x3a07f0=_0x2f7492;console[_0x3a07f0(0x1d6)](_0x3a07f0(0x1db),_0x335d4e['error']),showNotification(_0x335d4e[_0x3a07f0(0x1d6)]||'Lỗi\x20xác\x20thực,\x20vui\x20lòng\x20đăng\x20nhập\x20lại',!![]),logout();});})[_0x29bbe1(0x1bf)](_0x171050=>{const _0x2959f7=_0x29bbe1;console[_0x2959f7(0x1d6)](_0x2959f7(0x1df),_0x171050),showNotification(_0x2959f7(0x1fc),!![]),logout();});}function refreshToken(){const _0x13e5bb=_0x439b25;fetch(API_BASE+_0x13e5bb(0x18e),{'headers':{'Authorization':_0x13e5bb(0x226)+authToken}})[_0x13e5bb(0x195)](_0xcb6c3d=>{const _0x3c5882=_0x13e5bb;if(_0xcb6c3d['ok'])return _0xcb6c3d[_0x3c5882(0x1e2)]()['then'](_0x133043=>{const _0x383e47=_0x3c5882;authToken=_0x133043[_0x383e47(0x235)],localStorage['setItem']('adminToken',authToken),console['log'](_0x383e47(0x25f));});else console[_0x3c5882(0x1d6)](_0x3c5882(0x1aa)),logout();})['catch'](_0x9ae91=>{const _0x27a21d=_0x13e5bb;console[_0x27a21d(0x1d6)]('Lỗi\x20kết\x20nối\x20khi\x20làm\x20mới\x20token:',_0x9ae91),logout();});}setInterval(refreshToken,0xc*0x3c*0x3c*0x3e8);function showNotification(_0xefbcf,_0xa8a36e=![]){const _0x5554c1=_0x439b25,_0x5d1a37=document[_0x5554c1(0x268)]('notification');_0x5d1a37['textContent']=_0xefbcf,_0x5d1a37[_0x5554c1(0x1b8)][_0x5554c1(0x234)](_0x5554c1(0x1d6),_0xa8a36e),_0x5d1a37['style'][_0x5554c1(0x1bd)]=_0x5554c1(0x16d),setTimeout(()=>_0x5d1a37['style'][_0x5554c1(0x1bd)]='none',0xbb8);}function showLoader(_0x29ce14,_0x3186df){const _0x83b943=_0x439b25,_0x26bd7f=document[_0x83b943(0x268)](_0x29ce14);_0x26bd7f[_0x83b943(0x1eb)]=_0x83b943(0x217)+_0x3186df,_0x26bd7f[_0x83b943(0x236)]=!![];}function removeLoader(_0xf1e04e,_0xb503c1){const _0xed1af6=_0x439b25,_0x23a766=document[_0xed1af6(0x268)](_0xf1e04e);_0x23a766[_0xed1af6(0x1eb)]=_0xb503c1,_0x23a766[_0xed1af6(0x236)]=![];}function debounce(_0xefce10,_0x8f4ce3){let _0x6edfd3;return(..._0xa0c08f)=>{clearTimeout(_0x6edfd3),_0x6edfd3=setTimeout(()=>_0xefce10(..._0xa0c08f),_0x8f4ce3);};}function formatDate(_0x236f17){const _0x4c909a=_0x439b25;if(!_0x236f17)return _0x4c909a(0x1d5);const _0x16beca=new Date(_0x236f17);return _0x16beca[_0x4c909a(0x22a)](_0x4c909a(0x17f));}function getStatusBadge(_0x2da7e5){const _0x3d5532=_0x439b25;if(_0x2da7e5[_0x3d5532(0x1d4)])return _0x3d5532(0x179);if(_0x2da7e5['permanent'])return'<span\x20class=\x22status-badge\x20status-active\x22>Permanent</span>';if(new Date(_0x2da7e5[_0x3d5532(0x228)])<new Date())return _0x3d5532(0x210);if(_0x2da7e5['used'])return _0x3d5532(0x212);return _0x3d5532(0x207);}function getUserStatusBadge(_0x525cf0){const _0x18c9d7=_0x439b25;return _0x525cf0['banned']?_0x18c9d7(0x179):_0x18c9d7(0x216);}function switchTab(_0x163a50){const _0x5f130e=_0x439b25;document[_0x5f130e(0x1fb)](_0x5f130e(0x175))[_0x5f130e(0x1bb)](_0xba8f9d=>_0xba8f9d[_0x5f130e(0x1b8)][_0x5f130e(0x165)](_0x5f130e(0x23a))),document['querySelector'](_0x5f130e(0x23b)+_0x163a50+'\x22]')['classList'][_0x5f130e(0x1a4)](_0x5f130e(0x23a)),document[_0x5f130e(0x1fb)]('.tab-content')[_0x5f130e(0x1bb)](_0x506bf7=>_0x506bf7['classList'][_0x5f130e(0x165)]('active')),document['getElementById'](_0x163a50+_0x5f130e(0x17d))[_0x5f130e(0x1b8)]['add'](_0x5f130e(0x23a));if(_0x163a50===_0x5f130e(0x257))loadKeys();if(_0x163a50===_0x5f130e(0x23f))loadUsers();if(_0x163a50===_0x5f130e(0x18a))loadAdmins();if(_0x163a50===_0x5f130e(0x24e))loadAdminActivity();if(_0x163a50===_0x5f130e(0x1c4))loadChatMessages();}function createPagination(_0x2adcc0,_0x527f06,_0xaf54fa,_0x529471){const _0x2b76de=_0x439b25,_0x22e64f=document['getElementById'](_0x2adcc0);_0x22e64f[_0x2b76de(0x1eb)]='';const _0x56981c=Math['ceil'](_0x527f06/ itemsPerPage);for(let _0x3cd019=0x1;_0x3cd019<=_0x56981c;_0x3cd019++){const _0x4acdb8=document[_0x2b76de(0x1f0)](_0x2b76de(0x227));_0x4acdb8[_0x2b76de(0x1e0)]=_0x2b76de(0x254),_0x4acdb8['textContent']=_0x3cd019;if(_0x3cd019===_0xaf54fa)_0x4acdb8['classList'][_0x2b76de(0x1a4)](_0x2b76de(0x23a));_0x4acdb8['addEventListener'](_0x2b76de(0x243),()=>{const _0x542b56=_0x2b76de;_0xaf54fa[_0x2adcc0[_0x542b56(0x1c9)](_0x542b56(0x240),'')]=_0x3cd019,_0x529471();}),_0x22e64f[_0x2b76de(0x17c)](_0x4acdb8);}}async function loadKeys(){const _0x5d21a0=_0x439b25;try{const _0x1e7065=document['getElementById'](_0x5d21a0(0x203))['value']['toLowerCase'](),_0x528e97=await fetch(API_BASE+'/admin/keys',{'headers':{'Authorization':_0x5d21a0(0x226)+authToken}});if(!_0x528e97['ok'])throw new Error('Lỗi\x20tải\x20keys');const _0x11c665=await _0x528e97['json']();let _0x2f7e2d=_0x11c665['filter'](_0x3e602d=>_0x3e602d[_0x5d21a0(0x1b1)][_0x5d21a0(0x231)]()['includes'](_0x1e7065)||_0x3e602d[_0x5d21a0(0x17b)]&&_0x3e602d[_0x5d21a0(0x17b)][_0x5d21a0(0x231)]()['includes'](_0x1e7065)||_0x3e602d['username']&&_0x3e602d[_0x5d21a0(0x1d0)][_0x5d21a0(0x231)]()[_0x5d21a0(0x20a)](_0x1e7065));const _0x101d33=_0x2f7e2d[_0x5d21a0(0x238)],_0x15d4b1=(currentPage[_0x5d21a0(0x257)]-0x1)*itemsPerPage;_0x2f7e2d=_0x2f7e2d['slice'](_0x15d4b1,_0x15d4b1+itemsPerPage);const _0x303a54=document[_0x5d21a0(0x268)](_0x5d21a0(0x20b));_0x303a54[_0x5d21a0(0x1eb)]='',_0x2f7e2d[_0x5d21a0(0x1bb)](_0x54c763=>{const _0x2b0fa7=_0x5d21a0,_0x286e35=document[_0x2b0fa7(0x1f0)]('tr');_0x286e35[_0x2b0fa7(0x1eb)]=_0x2b0fa7(0x20d)+_0x54c763[_0x2b0fa7(0x1b1)]+_0x2b0fa7(0x248)+(_0x54c763[_0x2b0fa7(0x17b)]||'-')+_0x2b0fa7(0x248)+(_0x54c763['username']||'-')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x54c763[_0x2b0fa7(0x25d)]||'-')+_0x2b0fa7(0x248)+formatDate(_0x54c763['created_at'])+_0x2b0fa7(0x248)+formatDate(_0x54c763[_0x2b0fa7(0x228)])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+getStatusBadge(_0x54c763)+_0x2b0fa7(0x18c)+_0x54c763[_0x2b0fa7(0x1b1)]+'\x27)\x22><i\x20class=\x22fas\x20fa-edit\x22></i>\x20Edit\x20Expiry</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20btn-danger\x22\x20onclick=\x22deleteKey(\x27'+_0x54c763['key']+_0x2b0fa7(0x264),_0x303a54[_0x2b0fa7(0x17c)](_0x286e35);}),createPagination('keysPagination',_0x101d33,currentPage[_0x5d21a0(0x257)],loadKeys);}catch(_0x5c0370){showNotification(_0x5d21a0(0x1de),!![]);}}async function loadUsers(){const _0x53d50a=_0x439b25;try{const _0xa6029d=document['getElementById'](_0x53d50a(0x222))['value'][_0x53d50a(0x231)](),_0x2c6759=await fetch(API_BASE+_0x53d50a(0x198),{'headers':{'Authorization':_0x53d50a(0x226)+authToken}});if(!_0x2c6759['ok'])throw new Error(_0x53d50a(0x244));const _0x5da77e=await _0x2c6759[_0x53d50a(0x1e2)]();let _0x44a9c9=_0x5da77e[_0x53d50a(0x16f)](_0x2aa106=>_0x2aa106['user_id'][_0x53d50a(0x231)]()[_0x53d50a(0x20a)](_0xa6029d)||_0x2aa106[_0x53d50a(0x1d0)][_0x53d50a(0x231)]()[_0x53d50a(0x20a)](_0xa6029d));const _0x3ab842=_0x44a9c9[_0x53d50a(0x238)],_0x40b7a6=(currentPage[_0x53d50a(0x23f)]-0x1)*itemsPerPage;_0x44a9c9=_0x44a9c9[_0x53d50a(0x1d7)](_0x40b7a6,_0x40b7a6+itemsPerPage);const _0x794d9=document[_0x53d50a(0x268)](_0x53d50a(0x20c));_0x794d9[_0x53d50a(0x1eb)]='',_0x44a9c9[_0x53d50a(0x1bb)](_0x245e6b=>{const _0x5a0a0d=_0x53d50a,_0x4cd4a0=document[_0x5a0a0d(0x1f0)]('tr');_0x4cd4a0[_0x5a0a0d(0x1eb)]=_0x5a0a0d(0x20d)+_0x245e6b[_0x5a0a0d(0x17b)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x245e6b[_0x5a0a0d(0x1d0)]+_0x5a0a0d(0x248)+_0x245e6b[_0x5a0a0d(0x251)]+_0x5a0a0d(0x248)+formatDate(_0x245e6b[_0x5a0a0d(0x1cd)])+_0x5a0a0d(0x248)+getUserStatusBadge(_0x245e6b)+_0x5a0a0d(0x194)+_0x245e6b[_0x5a0a0d(0x17b)]+_0x5a0a0d(0x1c8)+(_0x245e6b['banned']?'<button\x20class=\x22action-btn\x20btn-warning\x22\x20onclick=\x22unbanUser(\x27'+_0x245e6b['user_id']+_0x5a0a0d(0x263):_0x5a0a0d(0x1af)+_0x245e6b[_0x5a0a0d(0x17b)]+'\x27)\x22><i\x20class=\x22fas\x20fa-ban\x22></i>\x20Ban</button>')+_0x5a0a0d(0x25e),_0x794d9[_0x5a0a0d(0x17c)](_0x4cd4a0);}),createPagination('usersPagination',_0x3ab842,currentPage[_0x53d50a(0x23f)],loadUsers);}catch(_0x4d76e1){showNotification(_0x53d50a(0x244),!![]);}}async function loadAdmins(){const _0x4bcb28=_0x439b25;try{const _0x562c6a=await fetch(API_BASE+_0x4bcb28(0x215),{'headers':{'Authorization':_0x4bcb28(0x226)+authToken}});if(!_0x562c6a['ok'])throw new Error(_0x4bcb28(0x24d));const _0x5e9ff3=await _0x562c6a[_0x4bcb28(0x1e2)](),_0x430dd3=document[_0x4bcb28(0x268)]('adminsList');_0x430dd3['innerHTML']='',_0x5e9ff3[_0x4bcb28(0x1bb)](_0xe28897=>{const _0x14d37b=_0x4bcb28,_0x292789=document[_0x14d37b(0x1f0)]('tr');_0x292789[_0x14d37b(0x1eb)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xe28897[_0x14d37b(0x1d0)]+_0x14d37b(0x248)+(_0xe28897['is_super_admin']?'<span\x20class=\x22status-badge\x20status-active\x22>Yes</span>':_0x14d37b(0x1d2))+_0x14d37b(0x248)+formatDate(_0xe28897[_0x14d37b(0x21c)])+_0x14d37b(0x169)+(_0xe28897[_0x14d37b(0x1d0)]!=='owner'?_0x14d37b(0x200)+_0xe28897[_0x14d37b(0x1d0)]+_0x14d37b(0x269)+_0xe28897['is_super_admin']+_0x14d37b(0x259)+_0xe28897[_0x14d37b(0x1d0)]+_0x14d37b(0x19e):'')+_0x14d37b(0x25e),_0x430dd3['appendChild'](_0x292789);});}catch(_0x139ece){showNotification(_0x4bcb28(0x24d),!![]);}}async function loadAdminActivity(){const _0xec4d60=_0x439b25;try{const _0x478309=document[_0xec4d60(0x268)]('searchActivity')[_0xec4d60(0x211)][_0xec4d60(0x231)](),_0x5e5f63=await fetch(API_BASE+_0xec4d60(0x22c),{'headers':{'Authorization':_0xec4d60(0x226)+authToken}});if(!_0x5e5f63['ok'])throw new Error(_0xec4d60(0x189));const _0x32986f=await _0x5e5f63['json']();let _0x318454=_0x32986f['filter'](_0x5aad28=>_0x5aad28['admin_username']['toLowerCase']()[_0xec4d60(0x20a)](_0x478309)||_0x5aad28[_0xec4d60(0x24a)][_0xec4d60(0x231)]()[_0xec4d60(0x20a)](_0x478309)||_0x5aad28[_0xec4d60(0x16e)]&&_0x5aad28[_0xec4d60(0x16e)][_0xec4d60(0x231)]()['includes'](_0x478309));const _0x5c5e06=_0x318454[_0xec4d60(0x238)],_0x285cbb=(currentPage[_0xec4d60(0x24e)]-0x1)*itemsPerPage;_0x318454=_0x318454[_0xec4d60(0x1d7)](_0x285cbb,_0x285cbb+itemsPerPage);const _0xe604b6=document[_0xec4d60(0x268)](_0xec4d60(0x172));_0xe604b6[_0xec4d60(0x1eb)]='',_0x318454[_0xec4d60(0x1bb)](_0x16cd60=>{const _0x59dce3=_0xec4d60,_0xd5f587=document['createElement'](_0x59dce3(0x24f));_0xd5f587['className']=_0x59dce3(0x184),_0xd5f587['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22activity-admin\x22>'+_0x16cd60['admin_username']+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22activity-action\x22>'+_0x16cd60[_0x59dce3(0x24a)]+'\x20'+(_0x16cd60[_0x59dce3(0x255)]?_0x59dce3(0x16b)+_0x16cd60['target_type']+'\x20'+_0x16cd60[_0x59dce3(0x213)]:'')+_0x59dce3(0x1fa)+(_0x16cd60['details']||'')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22activity-time\x22>'+formatDate(_0x16cd60[_0x59dce3(0x21c)])+_0x59dce3(0x183),_0xe604b6[_0x59dce3(0x17c)](_0xd5f587);}),createPagination(_0xec4d60(0x219),_0x5c5e06,currentPage['activity'],loadAdminActivity);}catch(_0x45b410){showNotification(_0xec4d60(0x189),!![]);}}function _0x58d9(_0x29b0a0,_0x5223ee){const _0x59109a=_0x5910();return _0x58d9=function(_0x58d91e,_0x1e49e3){_0x58d91e=_0x58d91e-0x164;let _0x17107a=_0x59109a[_0x58d91e];return _0x17107a;},_0x58d9(_0x29b0a0,_0x5223ee);}async function loadChatMessages(){(!socket||!socket['connected'])&&initSocket();}async function sendChatMessage(){const _0x58af73=_0x439b25,_0x5de44c=document['getElementById'](_0x58af73(0x21f)),_0x526c11=_0x5de44c[_0x58af73(0x211)][_0x58af73(0x1f4)]();if(!_0x526c11||!socket||!socket[_0x58af73(0x21a)]){showNotification(_0x58af73(0x1f9),!![]);return;}showLoader(_0x58af73(0x265),_0x58af73(0x19c)),socket[_0x58af73(0x267)]('message',_0x526c11),_0x5de44c['value']='',removeLoader(_0x58af73(0x265),_0x58af73(0x168));}async function createKey(){const _0xae222f=_0x439b25,_0x3a6570=document['getElementById'](_0xae222f(0x174))[_0xae222f(0x211)],_0x2eeeb5=document[_0xae222f(0x268)](_0xae222f(0x167))[_0xae222f(0x211)],_0x2d62be=document[_0xae222f(0x268)](_0xae222f(0x1bc))[_0xae222f(0x242)];showLoader(_0xae222f(0x1d8),_0xae222f(0x262));try{const _0x234938=await fetch(API_BASE+_0xae222f(0x1b4),{'method':'POST','headers':{'Content-Type':_0xae222f(0x1e8),'Authorization':'Bearer\x20'+authToken},'body':JSON['stringify']({'hours':_0x2eeeb5,'permanent':_0x2d62be,'keyPrefix':_0x3a6570})}),_0x44a4d1=await _0x234938[_0xae222f(0x1e2)]();removeLoader(_0xae222f(0x1d8),_0xae222f(0x1cc)),_0x44a4d1['success']?(document[_0xae222f(0x268)](_0xae222f(0x1ed))[_0xae222f(0x1c6)]=_0x44a4d1['key'],document[_0xae222f(0x268)](_0xae222f(0x186))[_0xae222f(0x1c6)]=_0xae222f(0x19a)+(_0x44a4d1[_0xae222f(0x1f6)]?_0xae222f(0x1d5):formatDate(_0x44a4d1[_0xae222f(0x192)])),document[_0xae222f(0x268)](_0xae222f(0x1ac))[_0xae222f(0x214)][_0xae222f(0x1bd)]=_0xae222f(0x16d),showNotification(_0xae222f(0x25a)),loadKeys()):showNotification(_0x44a4d1[_0xae222f(0x1d6)]||_0xae222f(0x221),!![]);}catch(_0x378a53){removeLoader(_0xae222f(0x1d8),_0xae222f(0x1cc)),showNotification(_0xae222f(0x221),!![]);}}function editKeyExpiry(_0x95ab98){const _0x262c39=_0x439b25;currentEditKey=_0x95ab98,document[_0x262c39(0x268)]('keyEditModal')[_0x262c39(0x214)]['display']=_0x262c39(0x1ab);}async function saveKeyEdit(){const _0x5f3adf=_0x439b25,_0x394330=document[_0x5f3adf(0x268)](_0x5f3adf(0x1dc))[_0x5f3adf(0x211)],_0x121dfa=document[_0x5f3adf(0x268)](_0x5f3adf(0x171))[_0x5f3adf(0x242)];showLoader(_0x5f3adf(0x204),'Đang\x20lưu...');try{const _0x2eaabd=await fetch(API_BASE+_0x5f3adf(0x247),{'method':_0x5f3adf(0x1b0),'headers':{'Content-Type':_0x5f3adf(0x1e8),'Authorization':_0x5f3adf(0x226)+authToken},'body':JSON[_0x5f3adf(0x16a)]({'key':currentEditKey,'hours':_0x394330,'permanent':_0x121dfa})}),_0x27465b=await _0x2eaabd[_0x5f3adf(0x1e2)]();removeLoader(_0x5f3adf(0x204),'<i\x20class=\x22fas\x20fa-save\x22></i>\x20Lưu\x20thay\x20đổi'),_0x27465b[_0x5f3adf(0x1cf)]?(document['getElementById'](_0x5f3adf(0x1f8))[_0x5f3adf(0x214)][_0x5f3adf(0x1bd)]=_0x5f3adf(0x1b3),showNotification(_0x5f3adf(0x1ec)),loadKeys()):showNotification(_0x27465b[_0x5f3adf(0x1d6)]||_0x5f3adf(0x166),!![]);}catch(_0x40c509){removeLoader('saveKeyEditBtn','<i\x20class=\x22fas\x20fa-save\x22></i>\x20Lưu\x20thay\x20đổi'),showNotification('Lỗi\x20cập\x20nhật\x20key',!![]);}}async function deleteKey(_0x110003){const _0x4ce426=_0x439b25;if(!confirm(_0x4ce426(0x258)))return;try{const _0x1e5201=await fetch(API_BASE+'/admin/delete-key/'+_0x110003,{'method':_0x4ce426(0x21d),'headers':{'Authorization':_0x4ce426(0x226)+authToken}}),_0x3378c3=await _0x1e5201[_0x4ce426(0x1e2)]();_0x3378c3[_0x4ce426(0x1cf)]?(showNotification(_0x4ce426(0x1e4)),loadKeys()):showNotification(_0x3378c3['error']||_0x4ce426(0x260),!![]);}catch(_0x51bf59){showNotification(_0x4ce426(0x260),!![]);}}async function viewUserDetail(_0x534a0d){const _0x2dd178=_0x439b25;currentUserId=_0x534a0d;try{const _0x548abb=await fetch(API_BASE+'/admin/users',{'headers':{'Authorization':_0x2dd178(0x226)+authToken}});if(!_0x548abb['ok'])throw new Error(_0x2dd178(0x1f2));const _0x221cf6=await _0x548abb['json'](),_0x1dc1d3=_0x221cf6['find'](_0x46f8dd=>_0x46f8dd[_0x2dd178(0x17b)]===_0x534a0d);if(!_0x1dc1d3)return;const _0x34e271=document['getElementById'](_0x2dd178(0x26a));_0x34e271[_0x2dd178(0x1eb)]=_0x2dd178(0x22f)+_0x1dc1d3['username'][0x0][_0x2dd178(0x173)]()+_0x2dd178(0x232)+_0x1dc1d3[_0x2dd178(0x1d0)]+_0x2dd178(0x201)+_0x1dc1d3[_0x2dd178(0x17b)]+_0x2dd178(0x1fd)+_0x1dc1d3[_0x2dd178(0x251)]+_0x2dd178(0x206)+formatDate(_0x1dc1d3[_0x2dd178(0x19d)])+_0x2dd178(0x252)+formatDate(_0x1dc1d3[_0x2dd178(0x1cd)])+_0x2dd178(0x1ea)+(_0x1dc1d3[_0x2dd178(0x1d4)]?_0x2dd178(0x1a8):_0x2dd178(0x17e))+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22stat-label\x22>Trạng\x20thái</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',document[_0x2dd178(0x268)](_0x2dd178(0x239))[_0x2dd178(0x214)][_0x2dd178(0x1bd)]=_0x2dd178(0x1ab);}catch(_0x20dd42){showNotification('Lỗi\x20tải\x20thông\x20tin\x20user',!![]);}}async function viewKeyHistory(){const _0x1e0a9f=_0x439b25;try{const _0x5f35d3=await fetch(API_BASE+_0x1e0a9f(0x25b)+currentUserId+'?limit=100',{'headers':{'Authorization':_0x1e0a9f(0x226)+authToken}});if(!_0x5f35d3['ok'])throw new Error(_0x1e0a9f(0x21b));const _0x563246=await _0x5f35d3[_0x1e0a9f(0x1e2)]();document[_0x1e0a9f(0x268)](_0x1e0a9f(0x239))['style'][_0x1e0a9f(0x1bd)]=_0x1e0a9f(0x1b3);const _0x5cf4ac=document[_0x1e0a9f(0x268)](_0x1e0a9f(0x1e5));_0x5cf4ac[_0x1e0a9f(0x1eb)]='',_0x563246[_0x1e0a9f(0x1bb)](_0x3bf725=>{const _0x19e21f=_0x1e0a9f,_0x6f10d7=document[_0x19e21f(0x1f0)](_0x19e21f(0x24f));_0x6f10d7['className']=_0x19e21f(0x199),_0x6f10d7['innerHTML']=_0x19e21f(0x1d9)+_0x3bf725[_0x19e21f(0x1b1)]+_0x19e21f(0x1a3)+_0x3bf725['action']+':\x20'+(_0x3bf725[_0x19e21f(0x16e)]||'')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22activity-time\x22>'+formatDate(_0x3bf725[_0x19e21f(0x21c)])+_0x19e21f(0x183),_0x5cf4ac[_0x19e21f(0x17c)](_0x6f10d7);}),document[_0x1e0a9f(0x268)](_0x1e0a9f(0x1a0))['style'][_0x1e0a9f(0x1bd)]='flex';}catch(_0x40a1ac){showNotification(_0x1e0a9f(0x21b),!![]);}}async function banUser(_0x3fd6d2){const _0x50e296=_0x439b25;if(!confirm(_0x50e296(0x191)))return;try{const _0x25e024=await fetch(API_BASE+'/admin/ban-user',{'method':_0x50e296(0x1b0),'headers':{'Content-Type':_0x50e296(0x1e8),'Authorization':'Bearer\x20'+authToken},'body':JSON[_0x50e296(0x16a)]({'user_id':_0x3fd6d2})}),_0x3a9a54=await _0x25e024['json']();_0x3a9a54['success']?(showNotification(_0x50e296(0x178)),loadUsers()):showNotification(_0x3a9a54[_0x50e296(0x1d6)]||'Lỗi\x20ban\x20user',!![]);}catch(_0x5bd697){showNotification(_0x50e296(0x1ff),!![]);}}async function unbanUser(_0x3cac12){const _0x212d00=_0x439b25;if(!confirm(_0x212d00(0x26b)))return;try{const _0x5a9df5=await fetch(API_BASE+_0x212d00(0x1c0),{'method':_0x212d00(0x1b0),'headers':{'Content-Type':_0x212d00(0x1e8),'Authorization':_0x212d00(0x226)+authToken},'body':JSON[_0x212d00(0x16a)]({'user_id':_0x3cac12})}),_0x1f3a37=await _0x5a9df5[_0x212d00(0x1e2)]();_0x1f3a37[_0x212d00(0x1cf)]?(showNotification(_0x212d00(0x246)),loadUsers()):showNotification(_0x1f3a37['error']||_0x212d00(0x180),!![]);}catch(_0x184983){showNotification(_0x212d00(0x180),!![]);}}async function createAdmin(){const _0x2d3674=_0x439b25,_0x2fd878=document[_0x2d3674(0x268)](_0x2d3674(0x261))['value'],_0x293456=document[_0x2d3674(0x268)](_0x2d3674(0x241))[_0x2d3674(0x211)];if(!_0x2fd878||!_0x293456){showNotification(_0x2d3674(0x25c),!![]);return;}showLoader(_0x2d3674(0x205),'Đang\x20tạo...');try{const _0x3c964d=await fetch(API_BASE+_0x2d3674(0x1e9),{'method':_0x2d3674(0x1b0),'headers':{'Content-Type':_0x2d3674(0x1e8),'Authorization':'Bearer\x20'+authToken},'body':JSON['stringify']({'username':_0x2fd878,'password':_0x293456})}),_0x14c576=await _0x3c964d[_0x2d3674(0x1e2)]();removeLoader(_0x2d3674(0x205),'<i\x20class=\x22fas\x20fa-plus\x22></i>\x20Tạo\x20Admin'),_0x14c576[_0x2d3674(0x1cf)]?(document[_0x2d3674(0x268)](_0x2d3674(0x261))[_0x2d3674(0x211)]='',document['getElementById'](_0x2d3674(0x241))[_0x2d3674(0x211)]='',showNotification(_0x2d3674(0x20e)),loadAdmins()):showNotification(_0x14c576[_0x2d3674(0x1d6)]||_0x2d3674(0x181),!![]);}catch(_0x44023a){removeLoader(_0x2d3674(0x205),_0x2d3674(0x22b)),showNotification('Lỗi\x20tạo\x20admin',!![]);}}async function toggleSuperAdmin(_0x5f2bdd,_0x14d7d7){const _0x3e3e6c=_0x439b25;if(!isOwner){showNotification('Chỉ\x20owner\x20mới\x20có\x20quyền\x20này',!![]);return;}if(!confirm(_0x3e3e6c(0x224)+(_0x14d7d7?'hạ':_0x3e3e6c(0x18f))+_0x3e3e6c(0x1da)+_0x5f2bdd+'?'))return;try{const _0x11cf98=await fetch(API_BASE+'/admin/update-admin-role',{'method':_0x3e3e6c(0x1b0),'headers':{'Content-Type':_0x3e3e6c(0x1e8),'Authorization':_0x3e3e6c(0x226)+authToken},'body':JSON[_0x3e3e6c(0x16a)]({'username':_0x5f2bdd,'is_super_admin':!_0x14d7d7})}),_0x1825de=await _0x11cf98[_0x3e3e6c(0x1e2)]();_0x1825de[_0x3e3e6c(0x1cf)]?(showNotification('Cập\x20nhật\x20vai\x20trò\x20thành\x20công'),loadAdmins()):showNotification(_0x1825de[_0x3e3e6c(0x1d6)]||_0x3e3e6c(0x249),!![]);}catch(_0x585c3b){showNotification('Lỗi\x20cập\x20nhật\x20vai\x20trò',!![]);}}async function deleteAdmin(_0x2ab1f9){const _0x52a90d=_0x439b25;if(!isOwner){showNotification(_0x52a90d(0x229),!![]);return;}if(!confirm(_0x52a90d(0x1f5)+_0x2ab1f9+'?'))return;try{const _0x4cdf7c=await fetch(API_BASE+_0x52a90d(0x1ee)+_0x2ab1f9,{'method':_0x52a90d(0x21d),'headers':{'Authorization':_0x52a90d(0x226)+authToken}}),_0x5f4178=await _0x4cdf7c[_0x52a90d(0x1e2)]();_0x5f4178[_0x52a90d(0x1cf)]?(showNotification(_0x52a90d(0x164)),loadAdmins()):showNotification(_0x5f4178[_0x52a90d(0x1d6)]||_0x52a90d(0x1e3),!![]);}catch(_0x305deb){showNotification(_0x52a90d(0x1e3),!![]);}}async function backupDatabase(){const _0x2396fa=_0x439b25;try{const _0x387320=await fetch(API_BASE+_0x2396fa(0x1b6),{'headers':{'Authorization':_0x2396fa(0x226)+authToken}}),_0x4b32b7=await _0x387320[_0x2396fa(0x1e2)]();_0x4b32b7[_0x2396fa(0x1cf)]?showNotification(_0x2396fa(0x1ce)+_0x4b32b7[_0x2396fa(0x256)]):showNotification(_0x4b32b7[_0x2396fa(0x1d6)]||'Lỗi\x20backup',!![]);}catch(_0x5d039b){showNotification(_0x2396fa(0x218),!![]);}}async function login(){const _0x4d7fc5=_0x439b25,_0x26abc6=document[_0x4d7fc5(0x268)](_0x4d7fc5(0x1d0))[_0x4d7fc5(0x211)],_0x3e0859=document[_0x4d7fc5(0x268)](_0x4d7fc5(0x1c5))[_0x4d7fc5(0x211)];showLoader(_0x4d7fc5(0x220),_0x4d7fc5(0x24b));try{const _0x1f0968=await fetch(API_BASE+_0x4d7fc5(0x233),{'method':'POST','headers':{'Content-Type':_0x4d7fc5(0x1e8)},'body':JSON[_0x4d7fc5(0x16a)]({'username':_0x26abc6,'password':_0x3e0859})}),_0x4fa992=await _0x1f0968[_0x4d7fc5(0x1e2)]();removeLoader('loginBtn',_0x4d7fc5(0x1c3)),_0x4fa992[_0x4d7fc5(0x1cf)]?(authToken=_0x4fa992[_0x4d7fc5(0x235)],currentUsername=_0x26abc6,isSuperAdmin=_0x4fa992['is_super_admin'],isOwner=_0x4fa992[_0x4d7fc5(0x250)],localStorage['setItem'](_0x4d7fc5(0x1d3),authToken),localStorage[_0x4d7fc5(0x225)](_0x4d7fc5(0x182),currentUsername),localStorage[_0x4d7fc5(0x225)](_0x4d7fc5(0x23c),isSuperAdmin),localStorage[_0x4d7fc5(0x225)](_0x4d7fc5(0x185),isOwner),showDashboard(),initSocket(),showNotification(_0x4d7fc5(0x1a6))):showNotification(_0x4fa992[_0x4d7fc5(0x1d6)]||'Sai\x20username\x20hoặc\x20password',!![]);}catch(_0x134df1){removeLoader(_0x4d7fc5(0x220),_0x4d7fc5(0x1c3)),showNotification('Lỗi\x20đăng\x20nhập',!![]);}}function showDashboard(){const _0x51e27f=_0x439b25;document[_0x51e27f(0x268)]('loginForm')[_0x51e27f(0x214)]['display']=_0x51e27f(0x1b3),document[_0x51e27f(0x268)](_0x51e27f(0x1b9))[_0x51e27f(0x214)][_0x51e27f(0x1bd)]=_0x51e27f(0x16d),document[_0x51e27f(0x268)](_0x51e27f(0x1fe))[_0x51e27f(0x214)][_0x51e27f(0x1bd)]='flex';const _0x359eba=document[_0x51e27f(0x268)](_0x51e27f(0x1e6));if(isOwner)_0x359eba['textContent']=_0x51e27f(0x1a2),_0x359eba['classList'][_0x51e27f(0x1a4)](_0x51e27f(0x1dd)),document[_0x51e27f(0x268)]('adminsTabBtn')[_0x51e27f(0x214)][_0x51e27f(0x1bd)]=_0x51e27f(0x16d),document['getElementById'](_0x51e27f(0x20f))[_0x51e27f(0x214)]['display']='block';else isSuperAdmin?(_0x359eba[_0x51e27f(0x1c6)]='Super\x20Admin',_0x359eba['classList'][_0x51e27f(0x1a4)](_0x51e27f(0x1c2)),document[_0x51e27f(0x268)]('adminsTabBtn')[_0x51e27f(0x214)]['display']=_0x51e27f(0x16d),document['getElementById']('activityTabBtn')['style'][_0x51e27f(0x1bd)]=_0x51e27f(0x1b3)):(_0x359eba[_0x51e27f(0x1c6)]=_0x51e27f(0x202),_0x359eba[_0x51e27f(0x1b8)][_0x51e27f(0x1a4)](_0x51e27f(0x1e1)),document[_0x51e27f(0x268)](_0x51e27f(0x187))['style']['display']=_0x51e27f(0x1b3),document[_0x51e27f(0x268)](_0x51e27f(0x20f))[_0x51e27f(0x214)][_0x51e27f(0x1bd)]='none');switchTab(_0x51e27f(0x257));}function logout(){const _0x38cbab=_0x439b25;if(socket)socket[_0x38cbab(0x237)]();localStorage['clear'](),authToken='',currentUsername='',isSuperAdmin=![],isOwner=![],document[_0x38cbab(0x268)](_0x38cbab(0x1b9))[_0x38cbab(0x214)][_0x38cbab(0x1bd)]=_0x38cbab(0x1b3),document['getElementById'](_0x38cbab(0x245))[_0x38cbab(0x214)][_0x38cbab(0x1bd)]='block',document['getElementById'](_0x38cbab(0x1fe))[_0x38cbab(0x214)][_0x38cbab(0x1bd)]=_0x38cbab(0x1b3),showNotification(_0x38cbab(0x196));}async function refreshAll(){const _0x49b0a5=_0x439b25;try{await Promise[_0x49b0a5(0x209)]([loadKeys(),loadUsers(),isSuperAdmin||isOwner?loadAdmins():Promise[_0x49b0a5(0x170)](),isOwner?loadAdminActivity():Promise[_0x49b0a5(0x170)]()]),showNotification('Đã\x20refresh');}catch(_0x1b522b){showNotification(_0x49b0a5(0x1be),!![]);}}document[_0x439b25(0x176)]('DOMContentLoaded',()=>{const _0x3cdbaf=_0x439b25;authToken&&verifyToken(),document['getElementById'](_0x3cdbaf(0x220))[_0x3cdbaf(0x176)](_0x3cdbaf(0x243),login),document[_0x3cdbaf(0x268)](_0x3cdbaf(0x24c))['addEventListener'](_0x3cdbaf(0x243),logout),document[_0x3cdbaf(0x268)](_0x3cdbaf(0x23d))['addEventListener'](_0x3cdbaf(0x243),refreshAll),document['getElementById'](_0x3cdbaf(0x23e))[_0x3cdbaf(0x176)](_0x3cdbaf(0x243),backupDatabase),document[_0x3cdbaf(0x1fb)]('.tab')['forEach'](_0x4c718e=>{const _0x1ef559=_0x3cdbaf;_0x4c718e[_0x1ef559(0x176)](_0x1ef559(0x243),()=>switchTab(_0x4c718e[_0x1ef559(0x223)][_0x1ef559(0x1d1)]));}),document[_0x3cdbaf(0x268)](_0x3cdbaf(0x203))[_0x3cdbaf(0x176)](_0x3cdbaf(0x1cb),debounce(loadKeys,0x12c)),document['getElementById'](_0x3cdbaf(0x222))[_0x3cdbaf(0x176)]('input',debounce(loadUsers,0x12c)),document[_0x3cdbaf(0x268)](_0x3cdbaf(0x17a))[_0x3cdbaf(0x176)](_0x3cdbaf(0x1cb),debounce(loadAdminActivity,0x12c)),document[_0x3cdbaf(0x268)](_0x3cdbaf(0x1d8))[_0x3cdbaf(0x176)]('click',createKey),document['getElementById'](_0x3cdbaf(0x205))[_0x3cdbaf(0x176)](_0x3cdbaf(0x243),createAdmin),document[_0x3cdbaf(0x268)]('sendChatBtn')[_0x3cdbaf(0x176)]('click',sendChatMessage),document[_0x3cdbaf(0x268)]('chatInput')[_0x3cdbaf(0x176)](_0x3cdbaf(0x1a5),_0x2c3fcb=>{const _0x3b68f3=_0x3cdbaf;if(_0x2c3fcb[_0x3b68f3(0x1b1)]===_0x3b68f3(0x1b7))sendChatMessage();}),document[_0x3cdbaf(0x268)](_0x3cdbaf(0x19b))[_0x3cdbaf(0x176)](_0x3cdbaf(0x243),()=>{const _0x5f1b95=_0x3cdbaf;document[_0x5f1b95(0x268)]('userDetailModal')[_0x5f1b95(0x214)][_0x5f1b95(0x1bd)]=_0x5f1b95(0x1b3);}),document['getElementById']('closeKeyHistoryModal')[_0x3cdbaf(0x176)](_0x3cdbaf(0x243),()=>{const _0x649557=_0x3cdbaf;document[_0x649557(0x268)]('keyHistoryModal')[_0x649557(0x214)][_0x649557(0x1bd)]=_0x649557(0x1b3);}),document['getElementById'](_0x3cdbaf(0x1c7))['addEventListener']('click',()=>{const _0xc6977c=_0x3cdbaf;document[_0xc6977c(0x268)]('keyEditModal')[_0xc6977c(0x214)]['display']=_0xc6977c(0x1b3);}),document[_0x3cdbaf(0x268)](_0x3cdbaf(0x204))[_0x3cdbaf(0x176)]('click',saveKeyEdit),document[_0x3cdbaf(0x268)](_0x3cdbaf(0x197))[_0x3cdbaf(0x176)](_0x3cdbaf(0x243),viewKeyHistory),window['addEventListener'](_0x3cdbaf(0x243),_0x2aea2c=>{const _0x2aa4c2=_0x3cdbaf;_0x2aea2c[_0x2aa4c2(0x208)]===document[_0x2aa4c2(0x268)](_0x2aa4c2(0x239))&&(_0x2aea2c[_0x2aa4c2(0x208)][_0x2aa4c2(0x214)][_0x2aa4c2(0x1bd)]=_0x2aa4c2(0x1b3)),_0x2aea2c[_0x2aa4c2(0x208)]===document['getElementById'](_0x2aa4c2(0x1a0))&&(_0x2aea2c[_0x2aa4c2(0x208)][_0x2aa4c2(0x214)][_0x2aa4c2(0x1bd)]=_0x2aa4c2(0x1b3)),_0x2aea2c[_0x2aa4c2(0x208)]===document[_0x2aa4c2(0x268)](_0x2aa4c2(0x1f8))&&(_0x2aea2c[_0x2aa4c2(0x208)][_0x2aa4c2(0x214)][_0x2aa4c2(0x1bd)]=_0x2aa4c2(0x1b3));});});
    </script>
</body>
</html>
